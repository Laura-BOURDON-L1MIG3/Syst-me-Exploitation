from maxpar import *

def main():
    # Créer les tâches
    t1 = Task()
    t1.name = "T1"
    t1.writes = ["X"]
    t1.run = runT1

    t2 = Task()
    t2.name = "T2"
    t2.writes = ["Y"]
    t2.run = runT2

    t3 = Task()
    t3.name = "T3"
    t3.writes = ["N"]
    t3.run = runT3

    tSomme = Task()
    tSomme.name = "somme"
    tSomme.reads = ["X", "Y"]
    tSomme.writes = ["Z"]
    tSomme.run = runTsomme

    # Créer le système de tâches
    s1 = TaskSystem([t1,t2,t3,tSomme], {"T1": [], "T2": ["T3"], "T3": [], "somme":["T1","T2"]})
   
    # Exécuter les dépendances de tâches
    print("Les dépendances de tâches:")
    print(s1.getDependencies("somme"))

    # Exécuter les tâches séquentiellement
    print("Exécution séquentielle des tâches:")
    s1.runSeq()

    # Exécuter les tâches en parallèle
    print("\nExécution en parallèle des tâches:")
    s1.run()

if __name__ == "__main__":
    main()